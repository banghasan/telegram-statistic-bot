services:
  bot:
    image: ghcr.io/banghasan/telegram-statistic-bot:latest
    container_name: telegram_stats_bot
    restart: unless-stopped
    ports:
      - "${PORT:-8101}:8101"
    volumes:
      - ./config.yml:/app/config.yml

  migrator:
    image: ghcr.io/banghasan/telegram-statistic-bot:latest
    container_name: telegram_stats_migrator
    volumes:
      - ./config.yml:/app/config.yml
    environment:
      - NODE_ENV=production
    entrypoint: [ "/app/migrate" ]
    profiles: [ "tools" ] # Don't start with 'up' automatically
    # Optional: Network configuration if using a separate database container
    # networks:
    #   - bot-net

    # networks:
    #   bot-net:
    #     driver: bridge
